#!/bin/sh

askdevice() { \
    choice=$(printf "jpserver\\narchjp\\narchlaptop\\nraspberrypi\\nother" | dmenu -i -p "Select device for ssh:")
	case "$choice" in
		jpserver) jpserver;;
		archjp) archjp;;
		raspberrypi) raspberrypi;;
		archlaptop) archlaptop;;
  	    other) other;;
		*) echo "$choice is not a valid choice";;
	esac
	}

jpserver() { \
    device=jpserver
    device_ip=100.99.155.30
    device_user=$(printf "jp\\nother" | dmenu -i -p "Select user for $device_name:")

	case "$device_user" in
	    jp)
            	st -e ssh -Y "$device_user"@"$device_ip";;
	    other)
            device_user=$(echo | dmenu -i -p "Enter user for archjp:")&&
            st -e ssh -Y "$device_user"@"$device_ip";;
		*)
            echo "$device_user is not a valid choice";;
	esac
	}
archjp() { \
    device=archjp
    device_ip=100.93.94.64
    device_user=$(printf "jp\\nother" | dmenu -i -p "Select user for $device_name:")

	case "$device_user" in
	    jp)
            	st -e ssh -Y "$device_user"@"$device_ip";;
	    other)
            device_user=$(echo | dmenu -i -p "Enter user for archjp:")&&
            st -e ssh -Y "$device_user"@"$device_ip";;
		*)
            echo "$device_user is not a valid choice";;
	esac
	}
archlaptop() { \
    device=archlaptop
    device_ip=100.107.93.81
    device_user=$(printf "jp\\nother" | dmenu -i -p "Select user for $device_name:")

	case "$device_user" in
	    jp)
            	st -e ssh -Y "$device_user"@"$device_ip";;
	    other)
            device_user=$(echo | dmenu -i -p "Enter user for archjp:")&&
            st -e ssh -Y "$device_user"@"$device_ip";;
		*)
            echo "$device_user is not a valid choice";;
	esac
	}

raspberrypi() { \
    device_name=raspberrypi
    device_ip=100.96.11.70
    device_user=$(printf "pi\\nother" | dmenu -i -p "Select user for $device_name:")
	case "$device_user" in
	    pi)
            st -e ssh -Y "$device_user"@"$device_ip";;
	    other)
            device_user=$(echo | dmenu -i -p "Enter user for raspberrypi:")&&
            st -e ssh -Y "$device_user"@"$device_ip";;
		*)
            echo "$device_user is not a valid choice";;
	esac
	}

other() { \
    device_name=other_device
    device_ip=$(echo | dmenu -i -p "Enter ip-address for $device_name:")&&
    device_user=$(echo | dmenu -i -p "Enter user for $device_name:")&&
    arguments=$(echo | dmenu -i -p "ssh arguments (example: port 2222 = '-p 2222' for $device_name:")&&

    st -e ssh $arguments "$device_user"@"$device_ip"
	}


case "$1" in
	archjp) archjp;;
	raspberrypi) raspberrypi;;
    other) other;;
	*) askdevice;;
esac
